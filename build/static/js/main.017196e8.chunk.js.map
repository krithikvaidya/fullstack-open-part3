{"version":3,"sources":["components/Filter.js","components/Button.js","components/PersonForm.js","services/persons.js","components/Person.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","filter","handleFilterChange","value","onChange","Button","onClick","text","PersonForm","props","newName","handleNameChange","newNumber","handleNumberChange","addRecord","baseUrl","axios","get","person","post","id","person_url","delete","put","Person","setPersons","persons","name","number","window","confirm","PersonsService","then","response","console","log","catch","err","remove_person","Persons","map","toLowerCase","indexOf","key","Notification","type","message","className","notificationType","App","useState","setNewName","setNewNumber","setFilter","notificationMessage","setNotificationMessage","handleNotification","notification_type","setTimeout","useEffect","data","event","target","curr_person","preventDefault","some","updated_record","error","new_record","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.017196e8.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({filter, handleFilterChange}) => (\n    <div>\n        filter shown with: <input value={filter} onChange={handleFilterChange}/>\n    </div>\n)\n\n\nexport default Filter\n","import React from 'react'\n\nconst Button = ({onClick, text}) => (\n\n    <button onClick={onClick}>\n        {text}\n    </button>\n\n)\n\nexport default Button","import React from 'react'\nimport Button from './Button'\n\nconst PersonForm = (props) => (\n\n    <div>\n        <form>\n            <p>name: <input value={props.newName} onChange={props.handleNameChange}/> </p>\n            <p>number: <input value={props.newNumber} onChange={props.handleNumberChange}/> </p>\n            <Button onClick={props.addRecord} text=\"add\" /> <br/>\n        </form>\n    </div>\n\n)\n\n\nexport default PersonForm","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(baseUrl)\n}\n\nconst add = (person) => {\n    return axios.post(baseUrl, person)\n}\n\nconst modify = (person) => {\n    return axios.put (`${baseUrl}/${person.id}`, person)\n}\n\nconst remove = (id) => {\n    const person_url = `${baseUrl}/${id}`\n    return axios.delete(person_url)\n}\n\nexport default {\n    getAll,\n    add,\n    remove,\n    modify\n}\n","import React from 'react'\nimport Button from './Button'\nimport PersonsService from '../services/persons'\n\nconst remove_person = (setPersons, persons, id, name) => {\n\n    if (window.confirm(`Do you really want to delete ${name}?`)) { \n        PersonsService\n        .remove (id)\n        .then (response => {\n            console.log (response)\n            setPersons (persons.filter(person => person.id === id ? false : true))\n        })\n        .catch (err => {\n            console.log ('failed')\n        })\n    }\n\n}\n\nconst Person = ({ setPersons, persons, person }) => (\n\n    <div>\n        <span>{person.name} {person.number}</span>\n        <span><Button onClick={() => remove_person (setPersons, persons, person.id, person.name) } text=\"remove\" /></span>\n        <br/>\n    </div> \n\n)\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\n\nconst Persons = ({ setPersons, persons, filter }) => (\n    \n    persons.map (person => {\n\n        if (person.name.toLowerCase().indexOf (filter.toLowerCase()) !== -1) {\n\n            return <Person key={person.name} setPersons={setPersons} persons={persons} person={person} />\n\n        }\n\n        return \"\"\n\n    })\n\n)\n\nexport default Persons","import React from 'react'\n\nconst Notification = ({ type, message }) => {\n\n    if (message === null)\n        return null\n\n    if (type === \"error\") {\n\n        return (\n\n            <div className=\"error\">\n                {message}\n            </div>\n\n        )\n        \n    }\n    \n        \n    else if (type === \"success\") {\n\n        return (\n\n            <div className=\"success\">\n                {message}\n            </div>\n\n        )\n\n    }\n\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport PersonsService from './services/persons'\nimport Notification from './components/Notification'\n\nlet notificationType = null\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState ('')\n  const [ notificationMessage, setNotificationMessage ] = useState(null)\n\n  const handleNameChange = (event) => {\n      setNewName (event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n      setNewNumber (event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n      setFilter (event.target.value)\n  }\n\n  const handleNotification = (notification_type, message) => {\n\n    setNewName ('')\n    setNewNumber ('')\n\n    notificationType = notification_type\n    setNotificationMessage (message)\n\n    setTimeout (() => {\n      notificationType = null\n      setNotificationMessage (null)\n    }, 5000)\n\n  }\n\n  const addRecord = (event) => {\n\n    event.preventDefault()\n    let curr_person\n\n    if (persons.some(person => {\n      curr_person = person\n      return person.name === newName\n    })) \n    {\n        \n        if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`))\n        {\n          const updated_record = {\n            ...curr_person,\n            number: newNumber\n          }\n\n          PersonsService\n          .modify (updated_record)\n          .then (response => {\n\n            setPersons (persons.map (person => person.name === curr_person.name ? updated_record : person))\n            handleNotification (\"success\", `Updated ${curr_person.name}`)\n\n          })\n          .catch(err => {\n\n            handleNotification(\"error\", err.response.data.error)\n            console.log(err.response.data)\n\n          })\n          \n        }\n        \n        return\n    }\n\n    const new_record = {\n        name: newName,\n        number: newNumber\n    }\n\n    PersonsService\n      .add(new_record)\n      .then(response => {\n\n        setPersons(persons.concat(response.data))\n        handleNotification(\"success\", `Added ${new_record.name}`)\n\n      })\n      .catch(err => {\n\n        handleNotification(\"error\", err.response.data.error)\n        console.log(err.response.data)\n\n      })\n\n  }\n\n  const effect_hook = () => {\n\n    PersonsService\n      .getAll()\n      .then(response => {\n        console.log('Fetched all records from database.')\n        setPersons(response.data)\n      })\n  }\n\n  useEffect (effect_hook, [])\n\n  return (\n    <div>\n\n      <Notification type={notificationType} message={notificationMessage} />\n\n      <h2>Phonebook</h2>\n\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\n        \n      <h1>add a new</h1>\n\n      <PersonForm \n        newName={newName} handleNameChange={handleNameChange}\n        newNumber={newNumber} handleNumberChange={handleNumberChange}\n        addRecord={addRecord}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons setPersons={setPersons} persons={persons} filter={filter} />\n\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}