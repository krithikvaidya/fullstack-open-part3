(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),l=t(4),u=t(2),s=function(e){var n=e.filter,t=e.handleFilterChange;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:n,onChange:t}))},i=function(e){var n=e.onClick,t=e.text;return r.a.createElement("button",{onClick:n},t)},m=function(e){return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("p",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})," "),r.a.createElement("p",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})," "),r.a.createElement(i,{onClick:e.addRecord,text:"add"})," ",r.a.createElement("br",null)))},d=t(3),f=t.n(d),h="http://localhost:3001/api/persons",p=function(){return f.a.get(h)},b=function(e){return f.a.post(h,e)},E=function(e){var n="".concat(h,"/").concat(e);return f.a.delete(n)},v=function(e){return f.a.put("".concat(h,"/").concat(e.id),e)},g=function(e){var n=e.setPersons,t=e.persons,a=e.person;return r.a.createElement("div",null,r.a.createElement("span",null,a.name," ",a.number),r.a.createElement("span",null,r.a.createElement(i,{onClick:function(){return function(e,n,t,a){window.confirm("Do you really want to delete ".concat(a,"?"))&&E(t).then((function(a){console.log(a),e(n.filter((function(e){return e.id!==t})))})).catch((function(e){console.log("failed")}))}(n,t,a.id,a.name)},text:"remove"})),r.a.createElement("br",null))},w=function(e){var n=e.setPersons,t=e.persons,a=e.filter;return t.map((function(e){return-1!==e.name.toLowerCase().indexOf(a.toLowerCase())?r.a.createElement(g,{key:e.name,setPersons:n,persons:t,person:e}):""}))},C=function(e){var n=e.type,t=e.message;return null===t?null:"error"===n?r.a.createElement("div",{className:"error"},t):"success"===n?r.a.createElement("div",{className:"success"},t):void 0},O=null,j=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),d=i[0],f=i[1],h=Object(a.useState)(""),E=Object(u.a)(h,2),g=E[0],j=E[1],k=Object(a.useState)(""),N=Object(u.a)(k,2),y=N[0],x=N[1],P=Object(a.useState)(null),S=Object(u.a)(P,2),F=S[0],D=S[1],J=function(e,n){f(""),j(""),O=e,D(n),setTimeout((function(){O=null,D(null)}),5e3)};return Object(a.useEffect)((function(){p().then((function(e){console.log("Fetched all records from database."),o(e.data)}))}),[]),r.a.createElement("div",null,r.a.createElement(C,{type:O,message:F}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(s,{filter:y,handleFilterChange:function(e){x(e.target.value)}}),r.a.createElement("h1",null,"add a new"),r.a.createElement(m,{newName:d,handleNameChange:function(e){f(e.target.value)},newNumber:g,handleNumberChange:function(e){j(e.target.value)},addRecord:function(e){var n;if(e.preventDefault(),t.some((function(e){return n=e,e.name===d}))){if(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))){var a=Object(l.a)(Object(l.a)({},n),{},{number:g});v(a).then((function(e){o(t.map((function(e){return e.name===n.name?a:e}))),J("success","Updated ".concat(n.name))})).catch((function(e){J("error",e.response.data.error),console.log(e.response.data)}))}}else{var r={name:d,number:g};b(r).then((function(e){o(t.concat(e.data)),J("success","Added ".concat(r.name))})).catch((function(e){J("error",e.response.data.error),console.log(e.response.data)}))}}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{setPersons:o,persons:t,filter:y}))};t(37);c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a67a5989.chunk.js.map