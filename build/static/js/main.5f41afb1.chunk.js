(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),l=t(4),u=t(2),i=function(e){var n=e.filter,t=e.handleFilterChange;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:n,onChange:t}))},m=function(e){return r.a.createElement("form",{onSubmit:e.addRecord},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.onClick,t=e.text;return r.a.createElement("button",{onClick:n},t)},f=t(3),d=t.n(f),h="/api/persons",b=function(){return d.a.get(h)},p=function(e){return d.a.post(h,e)},v=function(e){var n="".concat(h,"/").concat(e);return d.a.delete(n)},E=function(e){return d.a.put("".concat(h,"/").concat(e.id),e)},g=function(e){var n=e.setPersons,t=e.persons,a=e.person;return r.a.createElement("div",null,r.a.createElement("span",null,a.name," ",a.number),r.a.createElement("span",null,r.a.createElement(s,{onClick:function(){return function(e,n,t,a){window.confirm("Do you really want to delete ".concat(a,"?"))&&v(t).then((function(a){console.log(a),e(n.filter((function(e){return e.id!==t})))})).catch((function(e){console.log("failed")}))}(n,t,a.id,a.name)},text:"remove"})),r.a.createElement("br",null))},w=function(e){var n=e.setPersons,t=e.persons,a=e.filter;return t.map((function(e){return-1!==e.name.toLowerCase().indexOf(a.toLowerCase())?r.a.createElement(g,{key:e.name,setPersons:n,persons:t,person:e}):""}))},C=function(e){var n=e.type,t=e.message;return null===t?null:(console.log(n),console.log(t),r.a.createElement("div",{className:n},t))},O=null,j=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),f=s[0],d=s[1],h=Object(a.useState)(""),v=Object(u.a)(h,2),g=v[0],j=v[1],k=Object(a.useState)(""),N=Object(u.a)(k,2),y=N[0],S=N[1],P=Object(a.useState)(null),x=Object(u.a)(P,2),A=x[0],D=x[1],F=function(e,n){O=e,D(n),setTimeout((function(){O=null,D(null)}),5e3)};return Object(a.useEffect)((function(){console.log(t),b().then((function(e){console.log("getAll promise fulfilled"),o(e.data)}))}),[]),r.a.createElement("div",null,r.a.createElement(C,{type:O,message:A}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(i,{filter:y,handleFilterChange:function(e){S(e.target.value)}}),r.a.createElement("h1",null,"add a new"),r.a.createElement(m,{newName:f,handleNameChange:function(e){d(e.target.value)},newNumber:g,handleNumberChange:function(e){j(e.target.value)},addRecord:function(e){var n;if(e.preventDefault(),t.some((function(e){return n=e,e.name===f}))){if(window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))){var a=Object(l.a)(Object(l.a)({},n),{},{number:g});E(a).then((function(e){o(t.map((function(e){return e.name===n.name?a:e}))),F("success","Updated ".concat(n.name))})).catch((function(e){F("error","Information of ".concat(n.name," has already been removed from the server"))}))}}else{var r={name:f,number:g};p(r).then((function(e){o(t.concat(e.data)),F("success","Added ".concat(r.name)),d(""),j("")})).catch((function(e){F("error","An error occured. Could not add ".concat(n.name))}))}}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{setPersons:o,persons:t,filter:y}))};t(37);c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5f41afb1.chunk.js.map